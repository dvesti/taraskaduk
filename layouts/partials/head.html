<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

  {{ with .Title | default .Site.Title }}
  <title>{{ . }}</title>
  <meta property="og:title" content="{{ . }}" />
  <meta name="twitter:title" content="{{ . }}" />
  {{ end }}

  {{ with .Description | default .Site.Params.subtitle }}
  <meta name="description" content="{{ . }}">
  <meta property="og:description" content="{{ . }}">
  <meta name="twitter:description" content="{{ . | truncate 200 }}">
  {{ end }}

  <meta name="author" content="{{ .Site.Params.author }}"/>
  <meta property="og:site_name" content="{{ .Site.Title }}" />
  <meta property="og:url" content="{{ .Permalink }}" />

  {{ with .Params.thumbnail }}
  <meta property="og:image" content="{{ . | absURL }}" />
  <meta name="twitter:image" content="{{ .Params.image }}">
  {{ end }}
  <meta name="twitter:card" content="summary" />

  {{ with .Site.Params.twitter }}
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@{{ . }}" />
  <meta name="twitter:creator" content="@{{ . }}" />
  <meta name="twitter:image" content="{{ .Params.image }}">
  {{ end }}

  {{ if .IsPage }}
  <meta property="og:type" content="article" />
  {{ with .Site.Params.facebook }}
  <meta property="og:article:author" content="https://facebook.com/{{ . }}" />
  {{ end }}
  {{ else }}
  <meta property="og:type" content="website" />
  {{ end }}<meta charset="utf-8" />
  <!-- special treatment for authors pages -->
  {{ if and (in .Section "authors") (eq .Kind "taxonomy") }}
    {{$pages := .Site.Pages.ByPublishDate.Reverse}}
    {{ $title := default .Title .Params.name}}
    {{ range first 1 (where $pages ".Params.name" $title) }}
<title>rOpenSci | {{ .Params.name }}</title>
    {{ end }}
  <!-- -->
  
  {{ else }}
<title>rOpenSci | {{ .Title }}</title>

  {{ end }}

{{ partial "auto-syntax.html" . }}
{{ partial "style-path.html" }}

<meta name="viewport" content="width=device-width, initial-scale=1"><!-- this one is super important for mobile devices -->
<script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://use.fontawesome.com/3d3fe91f65.js"></script>
{{ partial "ga.html" . }}

{{ if eq .URL "/" }}
  <title>{{ .Site.Title }}</title>
  <meta property="og:title" content="{{ .Site.Params.title }}">
  <meta property="og:type" content="website">
  <meta property="description" content="{{ .Site.Params.description }}">
  <meta property="og:description" content="{{ .Site.Params.description }}">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="http://ropensci.org/android-chrome-512x512.png" >
{{ else }}
  <!-- special treatment for authors pages -->
  {{ if and (in .Section "authors") (eq .Kind "taxonomy") }}
    {{$pages := .Site.Pages.ByPublishDate.Reverse}}
    {{ $title := default .Title .Params.name}}
    {{ range first 1 (where $pages ".Params.name" $title) }}
     {{ .Scratch.Set "title" .Params.name }}
     {{ $description := (print "Content by " .Params.name ) }}
     {{ .Scratch.Set "description" $description }}
    {{ end }}
  <!-- -->
  {{ else }}
     {{ .Scratch.Set "title" .Title }}
     {{ .Scratch.Set "description" .Description }}
  {{ end }}
    {{ $defaultDescription := .Summary }}
    {{ $title := .Scratch.Get "title" }}
    {{ $description := .Scratch.Get "description" }}
  <title>{{ $title }}{{ with .Params.subtitle }} - {{ . }} {{ end }} - {{ .Site.Title }}</title>
    <meta property="og:title" content="{{ $title }} - {{ .Site.Title }}">
    <meta property="description" content="{{ $description | default $defaultDescription }}">
    <meta property="og:description" content="{{ $description | default $defaultDescription }}">
  <meta property="og:type" content="article">
  
  {{ if .Params.twitterImg }}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://ropensci.org/{{ .Params.twitterImg }}" >
  {{ else }}
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://ropensci.org/android-chrome-512x512.png" >
  {{ end }}

{{ end }}

<meta name="twitter:creator" content="@rOpenSci">
<meta name="twitter:site" content="@rOpenSci">
  
  
  <!-- Hugo Version number -->
  {{ .Hugo.Generator -}}
  
  <link rel="stylesheet" href="{{ .Site.BaseURL }}css/style.css" />
  <!-- Custom css files as define in config.toml -->
  {{ range .Site.Params.custom_css -}}
    <link rel="stylesheet" href="{{ . | absURL }}">
  {{- end }}
  {{- with .Site.Params.favicon }}
  <link rel='icon' type='image/x-icon' href="{{ . | absURL }}" />
  {{- end -}}
  {{ if eq .URL "/" }}
  <link href="{{ .RSSLink }}" rel="alternate" type="application/rss+xml" title="{{ .Site.Title }}" />
  {{ end }}
  <script type="text/javascript" src="{{ .Site.BaseURL }}js/bundle.js"></script>
  {{ partial "head_custom.html" . }}
</head>
